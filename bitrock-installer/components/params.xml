<component>
    <name>gather_params</name>
    <description>Gather Parameters</description>
    <canBeEdited>1</canBeEdited>
    <selected>1</selected>
    <show>1</show>
    <parameterList>
        <booleanParameter>
	<!-- write_properties -->
	<name>write_properties</name>
            <description></description>
            <explanation></explanation>
            <value></value>
            <default>${env(WRITE_OPTIONS)}</default>
            <ask>0</ask>
            <cliOptionText>Output a .options file that contains the configuration from running the installer.</cliOptionText>
            <displayStyle>radiobuttons</displayStyle>
        </booleanParameter>
        <stringParameter>
            <name>database_host_port</name>
            <description>Hidden value used to form database url for jdbc connection.</description>
            <explanation></explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>0</ask>
            <insertAfter>${platform}</insertAfter>
            <width>50</width>
        </stringParameter>
        <stringParameter>
            <name>aggregate_dir</name>
            <description>Hidden value defining the subdirectory in which to install files.</description>
            <explanation></explanation>
            <value>ODK Aggregate</value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <ask>0</ask>
            <insertAfter>${platform}</insertAfter>
            <width>50</width>
        </stringParameter>
        <directoryParameter>
            <name>installdir</name>
            <description>Hidden value defining the (parent_installdir + aggregate_dir) in which to install files.</description>
            <explanation></explanation>
            <value>${parent_installdir}${platform_path_separator}${aggregate_dir}</value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <ask>0</ask>
            <insertAfter>${platform}</insertAfter>
            <width>50</width>
        </directoryParameter>
        <stringParameter>
	<!-- hostname -->
	<name>hostname</name>
            <description>Hidden value used to hold resolved fully-qualfied hostname.</description>
            <explanation></explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>0</ask>
            <insertBefore>${platform}</insertBefore>
            <width>40</width>
        </stringParameter>
        <stringParameter>
	<!-- http_port -->
	<name>http_port</name>
            <description>Hidden value used to hold resolved http_port</description>
            <explanation></explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>0</ask>
            <insertBefore>${platform}</insertBefore>
            <width>40</width>
        </stringParameter>
        <stringParameter>
	<!-- https_port -->
	<name>https_port</name>
            <description>Hidden value used to hold resolved https_port</description>
            <explanation></explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>0</ask>
            <insertBefore>${platform}</insertBefore>
            <width>40</width>
        </stringParameter>
        <directoryParameter>
	<!--  parent_installdir -->
	<name>parent_installdir</name>
            <title>Select an output parent directory</title>
            <description></description>
            <explanation>This "installer" does not actually install anything.  Instead, it guides you through configuring ODK Aggregate.  As the last step of the installer, it will launch the install script for uploading to Google's AppEngine cloud services or open a README.html containing the final installation instructions.

Please select the parent directory under which an 'ODK Aggregate' directory will be created to contain the configured software.</explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <mustBeWritable>1</mustBeWritable>
            <mustExist>0</mustExist>
			<insertBefore>${platform}</insertBefore>
            <width>40</width>
            <validationActionList>
                <throwError>
                    <text>${parent_installdir}${platform_path_separator}${aggregate_dir} already exists.</text>
                    <ruleList>
                        <fileExists>
                            <path>${parent_installdir}${platform_path_separator}${aggregate_dir}</path>
                        </fileExists>
                    </ruleList>
                </throwError>
            </validationActionList>
        </directoryParameter>
        <choiceParameter>
	<!--  platform -->
	<name>platform</name>
            <title>Choose Platform</title>
            <description></description>
            <explanation>Choose the data storage and execution environment on which you would like ODK Aggregate to run. If you choose MySQL or PostgreSQL, you will need to first install that database server and an Apache Tomcat 6 server.</explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <displayType>radiobuttons</displayType>
            <ordering>default</ordering>
            <width>30</width>
            <optionList>
                <option>
                    <description>Uses Google's cloud-based data storage and webserver services.</description>
                    <image></image>
                    <text>Google App Engine</text>
                    <value>gae</value>
                </option>
                <option>
                    <description>Uses a MySQL database and an Apache Tomcat 6 webserver that you install.</description>
                    <image></image>
                    <text>MySQL</text>
                    <value>mysql</value>
                </option>
                <option>
                    <description>Uses a PostgreSQL database and an Apache Tomcat 6 webserver that you install.</description>
                    <image></image>
                    <text>PostgreSQL</text>
                    <value>postgresql</value>
                </option>
            </optionList>
        </choiceParameter>
        <linkParameter>
	<!-- infoTomcat -->
	<name>infoTomcat</name>
            <title>Pre-installation Requirements - Apache Tomcat</title>
            <description>http://tomcat.apache.org/download-60.cgi</description>
            <explanation>Before continuing, you should download and install an Apache Tomcat 6 webserver within which you will run ODK Aggregate (instructions on installing your chosen database will be presented later).  

Apache Tomcat 6 can be downloaded from the link below.

ODK Aggregate requires that Apache Tomcat's HTTP/1.1 Connector Port be configured as either port 8080 or port 80.  By default, Apache Tomcat uses port 8080.
</explanation>
            <insertAfter>${platform}</insertAfter>
            <clickedActionList>
                <launchBrowser>
                    <url>http://tomcat.apache.org/download-60.cgi</url>
                </launchBrowser>
            </clickedActionList>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </linkParameter>
        <labelParameter>
	<!-- tomcat_authentication_info -->
	<name>tomcat_authentication_info</name>
            <title>Apache Tomcat SSL configuration</title>
            <description></description>
            <explanation>Communications with an Apache Tomcat webserver cannot be encrypted unless the server is configured with an SSL certificate.  SSL certificates are generally issued by Verisign or another issuing authority.  When used, they allow a client to verify the identity of the webserver and to establish secured (encrypted) communications with that server.

Changing passwords, submitting data or viewing data using unencrypted communications can reveal that data to eavesdroppers.  This is particularly likely if these activities are done over unsecured WiFi hotspots.

Regardless of whether or not you have an SSL certificate, logins are always handled securely (i.e., during login, passwords are never exposed to an eavesdropper).
</explanation>
            <image></image>
            <insertAfter>${platform}</insertAfter>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </labelParameter>
        <parameterGroup>
            <name>tomcat_authentication_should_configure_group</name>
            <title>Apache Tomcat SSL configuration</title>
            <explanation>Do you have an SSL certificate?  Please refer to the Apache Tomcat documentation for how to install the certificate on your system.  Within the Tomcat 6.0 documentation, refer to the User Guide section 12: SSL.</explanation>
            <value></value>
            <default></default>
            <insertAfter>${tomcat_authentication_info}</insertAfter>
            <parameterList>
                <linkParameter>
                    <name>ssl_how_to</name>
                    <description>http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html</description>
                    <explanation></explanation>
                    <clickedActionList>
                        <launchBrowser>
                            <url>http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html</url>
                        </launchBrowser>
                    </clickedActionList>
                </linkParameter>
                <booleanParameter>
                    <name>tomcat_authentication_should_configure</name>
                    <description>Yes, I have an SSL certificate.</description>
                    <explanation></explanation>
                    <value></value>
                    <default>false</default>
                    <displayStyle>checkbox-left</displayStyle>
                </booleanParameter>
            </parameterList>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </parameterGroup>
        <choiceParameter>
	<!-- tomcat_port_choice -->
	<name>tomcat_port_choice</name>
            <title>Apache Tomcat Port Configuration</title>
            <description></description>
            <explanation>Choose the HTTP/1.1 Connector Port you specified during the Apache Tomcat install process.  By default, Apache Tomcat uses port 8080.

If an SSL certificate was installed, you must configure the HTTPS/1.1 Connector Port to be as shown below.
</explanation>
            <value>altPorts</value>
            <default>altPorts</default>
            <allowEmptyValue>0</allowEmptyValue>
            <displayType>radiobuttons</displayType>
            <insertAfter>${tomcat_authentication_should_configure_group}</insertAfter>
            <ordering>default</ordering>
            <width>30</width>
            <optionList>
                <option>
                    <description></description>
                    <image></image>
                    <text>HTTP/1.1 Connector Port 8080 (HTTPS/1.1 Connector Port 8443)</text>
                    <value>altPorts</value>
                </option>
                <option>
                    <description></description>
                    <image></image>
                    <text>HTTP/1.1 Connector Port 80 (HTTPS/1.1. Connector Port 443)</text>
                    <value>stdPorts</value>
                </option>
            </optionList>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </choiceParameter>
        <stringParameter>
	<!--  raw_hostname -->
	<name>raw_hostname</name>
            <title>Apache Tomcat webserver name</title>
            <description>Please enter the fully-qualified name of your webserver:</description>
            <explanation>For the webserver to construct links back to its content when publishing or exporting data files, it needs to know the fully-qualified name by which it can be reached.  If your machine's hostname is 'pc101' and your organization is 'opendatakit.org', then 'pc101.opendatakit.org' is likely the fully-qualified name for your webserver.
			
Leave this blank to use the fully-qualified name of this computer.</explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <insertAfter>${tomcat_port_choice}</insertAfter>
            <width>50</width>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </stringParameter>
        <linkParameter>
	<!-- infoDatabase -->
	<name>infoDatabasePostgreSQL</name>
            <title>Pre-installation Database Requirements - PostgreSQL</title>
            <description>http://www.postgresql.org/</description>
            <explanation>We have developed and tested against PostgreSQL 9.0

Download and install PostgreSQL from the link below.

Make note of any non-default values you've entered during the installation process.</explanation>
            <insertAfter>${platform}</insertAfter>
            <clickedActionList>
                <launchBrowser>
                    <url>http://www.postgresql.org</url>
                </launchBrowser>
            </clickedActionList>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>postgresql</value>
                </compareText>
            </ruleList>
        </linkParameter>
        <linkParameter>
	<!-- infoDatabase -->
	<name>infoDatabaseMySQL</name>
            <title>Pre-installation Database Requirements - MySQL</title>
            <description>http://www.mysql.com/downloads/</description>
            <explanation>We have developed and tested against MySQL 5.1

Please download and install MySQL from the link below.

Choose the Downloads (GA) tab, and select the MySQL Community Server edition.
Make note of any non-default values you have entered during the installation process.
</explanation>
            <insertAfter>${platform}</insertAfter>
            <clickedActionList>
                <launchBrowser>
                    <url>http://www.mysql.com/downloads/</url>
                </launchBrowser>
            </clickedActionList>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>mysql</value>
                </compareText>
            </ruleList>
        </linkParameter>
        <linkParameter>
	<!-- infoDatabase -->
	<name>infoDatabaseMySQL2</name>
            <title>Pre-installation Database Requirements - MySQL (concluded)</title>
            <description>http://www.mysql.com/downloads/connector/j/5.1.html</description>
            <explanation>You also must install a MySQL library on the Apache Tomcat instance.
Please download the MySQL Connector/J zip file from the link below.

Unzip or extract the contents of this file to a directory on your system.
The top-level directory should contain a file named:

  mysql-connector-java-...-bin.jar
  
Copy this file into the /lib directory of your Apache Tomcat 6 installation.
</explanation>
            <insertAfter>${platform}</insertAfter>
            <clickedActionList>
                <launchBrowser>
                    <url>http://www.mysql.com/downloads/connector/j/5.1.html</url>
                </launchBrowser>
            </clickedActionList>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>mysql</value>
                </compareText>
            </ruleList>
        </linkParameter>
        <parameterGroup>
	<!-- database_server_config -->
	<name>database_server_config</name>
            <title>Database server settings</title>
            <explanation>Specify the host and port number used to communicate with the database server.</explanation>
            <value></value>
            <default></default>
            <insertAfter>${platform}</insertAfter>
            <parameterList>
                <stringParameter>
                    <name>database_port</name>
                    <title>Configuration</title>
                    <description>Database port number:</description>
                    <explanation>Leave this field blank unless you specified a non-default port number during the installation of your database server.
</explanation>
                    <value></value>
                    <default></default>
                    <allowEmptyValue>1</allowEmptyValue>
                    <width>30</width>
                </stringParameter>
                <stringParameter>
                    <name>database_hostname</name>
                    <title>Configuration</title>
                    <description>Database server hostname:</description>
                    <explanation>If the database server is on the same host as the webserver, enter '127.0.0.1'</explanation>
                    <value></value>
                    <default>127.0.0.1</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>50</width>
                </stringParameter>
            </parameterList>
            <postShowPageActionList>
                <setInstallerVariable>
                    <name>database_host_port</name>
                    <value>${database_hostname}</value>
                    <ruleList>
                        <compareTextLength>
                            <length>0</length>
                            <logic>equals</logic>
                            <text>${database_port}</text>
                        </compareTextLength>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>database_host_port</name>
                    <value>${database_hostname}:${database_port}</value>
                    <ruleList>
                        <compareTextLength>
                            <length>0</length>
                            <logic>does_not_equal</logic>
                            <text>${database_port}</text>
                        </compareTextLength>
                    </ruleList>
                </setInstallerVariable>
            </postShowPageActionList>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </parameterGroup>
        <parameterGroup>
	<!-- database_config -->
	<name>database_config_part_1</name>
            <title>ODK Aggregate database authentication settings</title>
            <explanation>The database server must be configured with an account (username and password) that ODK Aggregate will employ for accessing the database server.  Username and password should be alphanumeric strings beginning with a letter (no spaces or punctuation please!).

The installer will generate a script that can be run on the database server to establish the required configuration.
</explanation>
            <value></value>
            <default></default>
            <insertAfter>${database_server_config}</insertAfter>
            <parameterList>
                <stringParameter>
                    <name>jdbc_username</name>
                    <description>Database username:</description>
                    <explanation></explanation>
                    <value></value>
                    <default>odk_user</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                </stringParameter>
                <passwordParameter>
                    <name>jdbc_password</name>
                    <description>Database password:</description>
                    <explanation></explanation>
                    <value></value>
                    <default></default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <descriptionRetype></descriptionRetype>
                    <width>30</width>
                </passwordParameter>
            </parameterList>
            <ruleList>
                <ruleGroup>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>mysql</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>postgresql</value>
                        </compareText>
                    </ruleList>
                </ruleGroup>
            </ruleList>
        </parameterGroup>
        <parameterGroup>
	<!-- database_config -->
	<name>database_config_part_2</name>
            <title>ODK Aggregate database datastore settings</title>
            <explanation>The database server must be configured with a workspace identified by a database name, and, if using Postgresql, a schema name.  This workspace is where ODK Aggregate will store uploaded forms, submissions and other information. The database name (and schema name for Postgresql) can be any alphanumeric strings beginning with a letter; underscores (_) are OK (no spaces or punctuation please!).

The installer will generate a script that can be run on the database server to create the workspace.
</explanation>
            <value></value>
            <default></default>
            <insertAfter>${database_config_part_1}</insertAfter>
            <parameterList>
                <stringParameter>
                    <name>jdbc_database</name>
                    <description>Database Name:</description>
                    <explanation></explanation>
                    <value></value>
                    <default>odk_prod</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                </stringParameter>
                <stringParameter>
                    <name>jdbc_schema</name>
                    <description>Database Schema Name:</description>
                    <explanation></explanation>
                    <value></value>
                    <default>odk_prod</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>postgresql</value>
                        </compareText>
                    </ruleList>
                </stringParameter>
            </parameterList>
            <ruleList>
                <ruleGroup>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>mysql</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>postgresql</value>
                        </compareText>
                    </ruleList>
                </ruleGroup>
            </ruleList>
        </parameterGroup>
        <stringParameter>
	<!-- instance_display_name -->
	<name>instance_display_name</name>
            <title>ODK Aggregate Instance Name</title>
            <description>Please enter the name of your instance:</description>
            <explanation>The ODK Aggregate instance name will be displayed to your users when they log into ODK Aggregate using their ODK Aggregate username and password. Including the name of your organization in the instance name can help users confirm that they have contacted the correct website.</explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <width>30</width>
        </stringParameter>
        <parameterGroup>
	<!-- email -->
	<name>email</name>
            <title>Super-user E-mail Address</title>
            <explanation>This should be a valid Gmail account or Google Apps account. The user with this account will always have full permissions on the system.  

The first time ODK Aggregate runs, only this user is allowed access to the system. Upon first logging in, they will be asked to complete the configuration of ODK Aggregate by specifying additional users and what permissions those users have on the system.

You must give a complete Email address (e.g., username@gmail.com ).
</explanation>
            <value>your.email@gmail.com</value>
            <default></default>
            <parameterList>
                <stringParameter>
                    <name>email</name>
                    <title>Configuration</title>
                    <description>Please enter your gmail.com e-mail address:</description>
                    <explanation></explanation>
                    <value></value>
                    <default></default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                    <validationActionList>
                        <if>
                            <actionList>
                                <throwError>
                                    <text>Bad email address: ${email}. Please enter a gmail email.com address, make sure to include '@gmail.com' on the end.</text>
                                </throwError>
                            </actionList>
                            <conditionRuleList>
                                <regExMatch>
                                    <logic>does_not_match</logic>
                                    <pattern>[^@ ]+@[^@ .]+\.[^@ ]+</pattern>
                                    <text>${email}</text>
                                </regExMatch>
                            </conditionRuleList>
                        </if>
                    </validationActionList>
                </stringParameter>
            </parameterList>
        </parameterGroup>
        <parameterGroup>
            <name>app_id_group</name>
            <title>Google AppEngine application ID</title>
            <explanation>Before continuing, you should obtain an application identifier in Google's AppEngine cloud services. Click the link below and select the 'Create Application' button on that page to create an application identifier. 

If you are replacing an existing application already on appspot, the application identifier is the leftmost portion of the appspot.com URL. For example, if your application is at 'opendatakit.appspot.com' you would enter 'opendatakit' below.</explanation>
            <value></value>
            <default></default>
            <parameterList>
                <linkParameter>
                    <name>appengine_link</name>
                    <description>https://appengine.google.com/</description>
                    <explanation></explanation>
                    <clickedActionList>
                        <launchBrowser>
                            <url>https://appengine.google.com/</url>
                        </launchBrowser>
                    </clickedActionList>
                </linkParameter>
                <stringParameter>
                    <name>app_id</name>
                    <description>Please enter your application id:</description>
                    <explanation></explanation>
                    <value></value>
                    <default></default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                </stringParameter>
            </parameterList>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </parameterGroup>
    </parameterList>
    <postInstallationActionList>
        <setInstallerVariable>
            <name>hostname</name>
            <value>${raw_hostname}</value>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>hostname</name>
            <value>${app_id}.appspot.com</value>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
                <compareTextLength>
                    <length>0</length>
                    <logic>does_not_equal</logic>
                    <text>${app_id}</text>
                </compareTextLength>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>hostname</name>
            <value>localhost</value>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
                <compareTextLength>
                    <length>0</length>
                    <logic>equals</logic>
                    <text>${app_id}</text>
                </compareTextLength>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>http_port</name>
            <value>80</value>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>http_port</name>
            <value>8080</value>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
                <compareText>
                    <logic>equals</logic>
                    <text>${tomcat_port_choice}</text>
                    <value>altPorts</value>
                </compareText>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>https_port</name>
            <value>443</value>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>https_port</name>
            <value>8443</value>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
                <compareText>
                    <logic>equals</logic>
                    <text>${tomcat_port_choice}</text>
                    <value>altPorts</value>
                </compareText>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>jdbc_schema</name>
            <value>${jdbc_database}</value>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>mysql</value>
                </compareText>
            </ruleList>
        </setInstallerVariable>
        <createDirectory>
            <path>${installdir}</path>
			<abortOnError>1</abortOnError>
        </createDirectory>
        <if>
            <actionList>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>platform</key>
                    <value>${platform}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>instance_display_name</key>
                    <value>${instance_display_name}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>email</key>
                    <value>${email}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>app_id</key>
                    <value>${app_id}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>jdbc_username</key>
                    <value>${jdbc_username}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>jdbc_password</key>
                    <value>${jdbc_password}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>jdbc_database</key>
                    <value>${jdbc_database}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>jdbc_schema</key>
                    <value>${jdbc_schema}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>database_port</key>
                    <value>${database_port}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>database_hostname</key>
                    <value>${database_hostname}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>database_host_port</key>
                    <value>${database_host_port}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>tomcat_authentication_should_configure</key>
                    <value>${tomcat_authentication_should_configure}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>raw_hostname</key>
                    <value>${raw_hostname}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>hostname</key>
                    <value>${hostname}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>tomcat_port_choice</key>
                    <value>${tomcat_port_choice}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>write_properties</key>
                    <value>${write_properties}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>installdir</key>
                    <value>${installdir}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>http_port</key>
                    <value>${http_port}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>https_port</key>
                    <value>${https_port}</value>
                </propertiesFileSet>
            </actionList>
            <ruleList>
                <isTrue>
                    <value>${write_properties}</value>
                </isTrue>
            </ruleList>
        </if>
    </postInstallationActionList>
    <preInstallationActionList>
        <autodetectJava>
            <customErrorMessage>You must have a Java 1.6 JRE installed.  Go to http://www.java.com/getjava/index.jsp</customErrorMessage>
            <promptUser>0</promptUser>
            <validVersionList>
                <validVersion>
                    <maxVersion></maxVersion>
                    <minVersion>1.6</minVersion>
                    <requireJDK>0</requireJDK>
                    <vendor></vendor>
                </validVersion>
            </validVersionList>
        </autodetectJava>
    </preInstallationActionList>
</component>
