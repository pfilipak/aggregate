<component>
    <name>gather_params</name>
    <description>Gather Parameters</description>
    <canBeEdited>1</canBeEdited>
    <selected>1</selected>
    <show>1</show>
    <initializationActionList>
        <setInstallerVariable>
            <name>temp_dir</name>
            <value>${system_temp_directory}/${installation_guid}</value>
        </setInstallerVariable>
        <createDirectory>
            <path>${temp_dir}</path>
        </createDirectory>
    </initializationActionList>
    <parameterList>
        <stringParameter>
            <name>database_host_port</name>
            <description>Hidden value used to form database url for jdbc connection.</description>
            <explanation></explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>0</ask>
            <insertAfter>${platform}</insertAfter>
            <width>50</width>
        </stringParameter>
        <stringParameter>
	<!-- hostname -->
	<name>hostname</name>
            <description>Hidden value used to hold resolved fully-qualfied hostname.</description>
            <explanation></explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>0</ask>
            <insertBefore>${platform}</insertBefore>
            <width>40</width>
        </stringParameter>
        <stringParameter>
	<!-- http_port -->
	<name>http_port</name>
            <description>Hidden value used to hold resolved http_port</description>
            <explanation></explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>0</ask>
            <insertBefore>${platform}</insertBefore>
            <width>40</width>
        </stringParameter>
        <stringParameter>
	<!-- https_port -->
	<name>https_port</name>
            <description>Hidden value used to hold resolved https_port</description>
            <explanation></explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>0</ask>
            <insertBefore>${platform}</insertBefore>
            <width>40</width>
        </stringParameter>
        <choiceParameter>
	<!--  platform -->
	<name>platform</name>
            <title>Choose Platform</title>
            <description></description>
            <explanation>Choose the data storage and execution environment on which you would like Aggregate to run. If you choose MySQL or PostgreSQL, you will need to install those servers and an Apache Tomcat 6 server.</explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <displayType>radiobuttons</displayType>
            <ordering>default</ordering>
            <width>30</width>
            <optionList>
                <option>
                    <description>Uses Google's cloud-based data storage and webserver services.</description>
                    <image></image>
                    <text>Google App Engine</text>
                    <value>gae</value>
                </option>
                <option>
                    <description>You must install MySQL and an Apache Tomcat 6 webserver.</description>
                    <image></image>
                    <text>MySQL</text>
                    <value>mysql</value>
                </option>
                <option>
                    <description>You must install PostgreSQL and an Apache Tomcat 6 webserver.</description>
                    <image></image>
                    <text>PostgreSQL</text>
                    <value>postgres</value>
                </option>
            </optionList>
        </choiceParameter>
        <choiceParameter>
	<!-- install_gae -->
	<name>install_gae</name>
            <title>Configuration</title>
            <description></description>
            <explanation></explanation>
            <value>0</value>
            <default>0</default>
            <allowEmptyValue>0</allowEmptyValue>
            <ask>0</ask>
            <displayType>radiobuttons</displayType>
            <insertAfter>${platform}</insertAfter>
            <ordering>default</ordering>
            <width>30</width>
            <optionList>
                <option>
                    <description></description>
                    <image></image>
                    <text>Deploy to Google AppEngine</text>
                    <value>1</value>
                </option>
                <option>
                    <description></description>
                    <image></image>
                    <text>Save generated war to file system</text>
                    <value>0</value>
                </option>
            </optionList>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </choiceParameter>
        <choiceParameter>
	<!-- install_tomcat -->
	<name>install_tomcat</name>
            <title>Configuration</title>
            <description></description>
            <explanation></explanation>
            <value>0</value>
            <default>0</default>
            <allowEmptyValue>0</allowEmptyValue>
            <ask>0</ask>
            <displayType>radiobuttons</displayType>
            <insertAfter>${platform}</insertAfter>
            <ordering>default</ordering>
            <width>30</width>
            <optionList>
                <option>
                    <description></description>
                    <image></image>
                    <text>Install Tomcat</text>
                    <value>1</value>
                </option>
                <option>
                    <description></description>
                    <image></image>
                    <text>Save generated war to file system</text>
                    <value>0</value>
                </option>
            </optionList>
            <ruleList>
                <ruleGroup>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>mysql</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>postgres</value>
                        </compareText>
                    </ruleList>
                </ruleGroup>
            </ruleList>
        </choiceParameter>
        <labelParameter>
	<!-- infoTomcat -->
	<name>infoTomcat</name>
            <title>Pre-installation Requirements - Apache Tomcat</title>
            <description></description>
            <explanation>Before continuing, you should download and install an Apache Tomcat 6 webserver within which you will run Aggregate (instructions on installing your chosen database will be presented later).  

Apache Tomcat 6 can be downloaded from here: http://tomcat.apache.org/download-60.cgi

ODK Aggregate requires that Apache Tomcat's HTTP/1.1 Connector Port be configured as either port 8080 or port 80.  By default, Apache Tomcat uses port 8080.
</explanation>
            <image></image>
            <insertAfter>${install_tomcat}</insertAfter>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </labelParameter>
        <directoryParameter>
	<!-- tomcat_installdir -->
	<name>tomcat_installdir</name>
            <title>Configuration</title>
            <description>Please choose the Apache Tomcat installation directory:</description>
            <explanation></explanation>
            <value></value>
            <default>${platform_install_prefix}/${product_shortname}-${product_version}/webserver</default>
            <allowEmptyValue>0</allowEmptyValue>
            <insertAfter>${infoTomcat}</insertAfter>
            <mustBeWritable>0</mustBeWritable>
            <mustExist>0</mustExist>
            <width>30</width>
            <ruleList>
                <compareValues>
                    <logic>equals</logic>
                    <value1>${install_tomcat}</value1>
                    <value2>1</value2>
                </compareValues>
            </ruleList>
        </directoryParameter>
        <labelParameter>
	<!-- tomcat_authentication_info -->
	<name>tomcat_authentication_info</name>
            <title>Apache Tomcat SSL configuration</title>
            <description></description>
            <explanation>Communications with an Apache Tomcat webserver cannot be encrypted unless the server is configured with an SSL certificate.  SSL certificates are generally issued by Verisign or another issuing authority.  When used, they allow a client to verify the identity of the webserver and to establish secured (encrypted) communications with that server.

Changing passwords, submitting data or viewing data using unencrypted communications can reveal that data to eavesdroppers.  This is particularly likely if these activities are done over unsecured WiFi hotspots.

Regardless of whether or not you have an SSL certificate, logins are always handled securely (i.e., during login, passwords are never exposed to an eavesdropper).
</explanation>
            <image></image>
            <insertAfter>${tomcat_installdir}</insertAfter>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </labelParameter>
        <booleanParameter>
	<!-- tomcat_authentication_should_configure -->
	<name>tomcat_authentication_should_configure</name>
            <title>Apache Tomcat SSL configuration</title>
            <description>Yes, I have an SSL certificate.</description>
            <explanation>Do you have an SSL certificate?  Please refer to the Apache Tomcat documentation for how to install the certificate on your system.</explanation>
            <value></value>
            <default>false</default>
            <displayStyle>checkbox-left</displayStyle>
            <insertAfter>${tomcat_authentication_info}</insertAfter>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </booleanParameter>
        <choiceParameter>
	<!-- tomcat_port_choice -->
	<name>tomcat_port_choice</name>
            <title>Apache Tomcat Port Configuration</title>
            <description></description>
            <explanation>Choose the HTTP/1.1 Connector Port you specified during the Apache Tomcat install process.  By default, Apache Tomcat uses port 8080.

If an SSL certificate was installed, you must configure the HTTPS/1.1 Connector Port to be as shown below.
</explanation>
            <value>altPorts</value>
            <default>altPorts</default>
            <allowEmptyValue>0</allowEmptyValue>
            <displayType>radiobuttons</displayType>
            <insertAfter>${tomcat_authentication_should_configure}</insertAfter>
            <ordering>default</ordering>
            <width>30</width>
            <optionList>
                <option>
                    <description></description>
                    <image></image>
                    <text>HTTP/1.1 Connector Port 8080 (HTTPS/1.1 Connector Port 8443)</text>
                    <value>altPorts</value>
                </option>
                <option>
                    <description></description>
                    <image></image>
                    <text>HTTP/1.1 Connector Port 80 (HTTPS/1.1. Connector Port 443)</text>
                    <value>stdPorts</value>
                </option>
            </optionList>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
            <validationActionList>
                <throwError>
                    <text>port 80 is not available or you do not have permission.</text>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${install_tomcat}</text>
                            <value>1</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${tomcat_port_choice}</text>
                            <value>stdPorts</value>
                        </compareText>
                        <portTest>
                            <condition>cannot_bind</condition>
                            <port>80</port>
                        </portTest>
                    </ruleList>
                </throwError>
                <throwError>
                    <text>port 443 is not available or you do not have permission.</text>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${install_tomcat}</text>
                            <value>1</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${tomcat_port_choice}</text>
                            <value>stdPorts</value>
                        </compareText>
                        <portTest>
                            <condition>cannot_bind</condition>
                            <port>443</port>
                        </portTest>
                    </ruleList>
                </throwError>
                <throwError>
                    <text>port 8080 is not available or you do not have permission.</text>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${install_tomcat}</text>
                            <value>1</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${tomcat_port_choice}</text>
                            <value>altPorts</value>
                        </compareText>
                        <portTest>
                            <condition>cannot_bind</condition>
                            <port>8080</port>
                        </portTest>
                    </ruleList>
                </throwError>
                <throwError>
                    <text>port 8443 is not available or you do not have permission.</text>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${install_tomcat}</text>
                            <value>1</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${tomcat_port_choice}</text>
                            <value>altPorts</value>
                        </compareText>
                        <portTest>
                            <condition>cannot_bind</condition>
                            <port>8443</port>
                        </portTest>
                    </ruleList>
                </throwError>
            </validationActionList>
        </choiceParameter>
        <stringParameter>
	<!--  raw_hostname -->
	<name>raw_hostname</name>
            <title>Apache Tomcat webserver name</title>
            <description>Please enter the fully-qualified name of your webserver:</description>
            <explanation>For the webserver to construct links back to its content when publishing or exporting data files, it needs to know the fully-qualified name by which it can be reached.  If your machine's hostname is 'pc101' and your organization is 'opendatakit.org', then 'pc101.opendatakit.org' is likely the fully-qualified name for your webserver.
			
Leave this blank to use the fully-qualified name of this computer.</explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <insertAfter>${tomcat_port_choice}</insertAfter>
            <width>50</width>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </stringParameter>
        <choiceParameter>
	<!-- install_db -->
	<name>install_db</name>
            <title>Install or use an existing database server</title>
            <description></description>
            <explanation></explanation>
            <value>0</value>
            <default>0</default>
            <allowEmptyValue>0</allowEmptyValue>
            <ask>0</ask>
            <displayType>radiobuttons</displayType>
            <insertAfter>${platform}</insertAfter>
            <ordering>default</ordering>
            <width>30</width>
            <optionList>
                <option>
                    <description></description>
                    <image></image>
                    <text>Install local database server</text>
                    <value>1</value>
                </option>
                <option>
                    <description></description>
                    <image></image>
                    <text>Point to existing database server</text>
                    <value>0</value>
                </option>
            </optionList>
            <ruleList>
                <ruleGroup>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>mysql</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>postgres</value>
                        </compareText>
                    </ruleList>
                </ruleGroup>
            </ruleList>
        </choiceParameter>
        <labelParameter>
	<!-- infoDatabase -->
	<name>infoDatabasePostgreSQL</name>
            <title>Pre-installation Database Requirements - PostgreSQL</title>
            <description></description>
            <explanation>We have developed and tested against PostgreSQL 9.0

Download and install PostgreSQL from http://www.postgresql.org/

Make note of any non-default values you've entered during the installation process.</explanation>
            <image></image>
            <insertAfter>${install_db}</insertAfter>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>postgres</value>
                </compareText>
            </ruleList>
        </labelParameter>
        <labelParameter>
	<!-- infoDatabase -->
	<name>infoDatabaseMySQL</name>
            <title>Pre-installation Database Requirements - MySQL</title>
            <description></description>
            <explanation>We have developed and tested against MySQL 5.1

Download and install MySQL from http://www.mysql.com/
Make note of any non-default values you have entered during the installation process.

Download the MySQL Connector/J from this same site.  
Unzip or extract the contents of this file to a directory on your system.
The top-level directory should contain a file named:
  mysql-connector-java-...-bin.jar
Copy this file into the /lib directory of your Apache Tomcat 6 installation.
</explanation>
            <image></image>
            <insertAfter>${install_db}</insertAfter>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>mysql</value>
                </compareText>
            </ruleList>
        </labelParameter>
        <directoryParameter>
	<!-- database_installdir -->
	<name>database_installdir</name>
            <title>Configuration</title>
            <description>Please choose the database installation directory:</description>
            <explanation></explanation>
            <value></value>
            <default>${platform_install_prefix}/${product_shortname}-${product_version}/database</default>
            <allowEmptyValue>0</allowEmptyValue>
            <insertAfter>${install_db}</insertAfter>
            <mustBeWritable>0</mustBeWritable>
            <mustExist>0</mustExist>
            <width>30</width>
            <ruleList>
                <ruleGroup>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <compareValues>
                            <logic>equals</logic>
                            <value1>${install_db}</value1>
                            <value2>1</value2>
                        </compareValues>
                    </ruleList>
                </ruleGroup>
            </ruleList>
        </directoryParameter>
        <parameterGroup>
	<!-- database_server_config -->
	<name>database_server_config</name>
            <title>Database server settings</title>
            <explanation>Specify the host and port number used to communicate with the database server.</explanation>
            <value></value>
            <default></default>
            <insertAfter>${database_installdir}</insertAfter>
            <parameterList>
                <passwordParameter>
                    <name>database_root_password</name>
                    <description>Database Root Password:</description>
                    <explanation></explanation>
                    <value></value>
                    <default></default>
                    <allowEmptyValue>1</allowEmptyValue>
                    <descriptionRetype></descriptionRetype>
                    <width>30</width>
                    <ruleList>
                        <compareValues>
                            <logic>equals</logic>
                            <value1>${install_db}</value1>
                            <value2>1</value2>
                        </compareValues>
                    </ruleList>
                </passwordParameter>
                <stringParameter>
                    <name>database_port</name>
                    <title>Configuration</title>
                    <description>Database port number:</description>
                    <explanation>Do not specify a port number (leave this field blank) unless you specified a non-default port number during the installation of your database server.
</explanation>
                    <value></value>
                    <default></default>
                    <allowEmptyValue>1</allowEmptyValue>
                    <width>30</width>
                </stringParameter>
                <stringParameter>
                    <name>database_hostname</name>
                    <title>Configuration</title>
                    <description>Database server hostname:</description>
                    <explanation>If the database server is on the same host as the webserver, enter '127.0.0.1'</explanation>
                    <value></value>
                    <default>127.0.0.1</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>50</width>
                    <ruleList>
                        <compareValues>
                            <logic>equals</logic>
                            <value1>${install_db}</value1>
                            <value2>0</value2>
                        </compareValues>
                    </ruleList>
                </stringParameter>
            </parameterList>
            <postShowPageActionList>
                <setInstallerVariable>
                    <name>database_host_port</name>
                    <value>${database_hostname}</value>
                    <ruleList>
                        <compareTextLength>
                            <length>0</length>
                            <logic>equals</logic>
                            <text>${database_port}</text>
                        </compareTextLength>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>database_host_port</name>
                    <value>${database_hostname}:${database_port}</value>
                    <ruleList>
                        <compareTextLength>
                            <length>0</length>
                            <logic>does_not_equal</logic>
                            <text>${database_port}</text>
                        </compareTextLength>
                    </ruleList>
                </setInstallerVariable>
            </postShowPageActionList>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </parameterGroup>
        <parameterGroup>
	<!-- database_config -->
	<name>database_config_part_1</name>
            <title>ODKAggregate database authentication settings</title>
            <explanation>The database server must be configured with a user, database name and database schema that Aggregate will use for its data storage needs.  Username and password should be an alphanumeric string beginning with a letter (no spaces or punctuation please!).

The installer will generate scripts that can be run on the database to create the needed user, database name and schema.
</explanation>
            <value></value>
            <default></default>
            <insertAfter>${database_server_config}</insertAfter>
            <parameterList>
                <stringParameter>
                    <name>jdbc_username</name>
                    <description>Database username:</description>
                    <explanation></explanation>
                    <value></value>
                    <default>odk_user</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                </stringParameter>
                <passwordParameter>
                    <name>jdbc_password</name>
                    <description>Database password:</description>
                    <explanation></explanation>
                    <value>odk_pass</value>
                    <default>odk_pass</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <descriptionRetype></descriptionRetype>
                    <width>30</width>
                </passwordParameter>
            </parameterList>
            <ruleList>
                <ruleGroup>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>mysql</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>postgres</value>
                        </compareText>
                    </ruleList>
                </ruleGroup>
            </ruleList>
        </parameterGroup>
        <parameterGroup>
	<!-- database_config -->
	<name>database_config_part_2</name>
            <title>ODKAggregate database datastore settings</title>
            <explanation>The database server must be configured with a user, database name and database schema that Aggregate will use for its data storage needs.  The database name and schema name can be any alphanumeric strings beginning with a letter; underscores (_) are OK (no spaces or punctuation please!).

The installer will generate scripts that can be run on the database to create the needed user, database name and schema.
</explanation>
            <value></value>
            <default></default>
            <insertAfter>${database_config_part_1}</insertAfter>
            <parameterList>
                <stringParameter>
                    <name>jdbc_database</name>
                    <description>Database Name:</description>
                    <explanation></explanation>
                    <value></value>
                    <default>odk_prod</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                </stringParameter>
                <stringParameter>
                    <name>jdbc_schema</name>
                    <description>Database Schema Name:</description>
                    <explanation></explanation>
                    <value></value>
                    <default>odk_prod</default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                </stringParameter>
            </parameterList>
            <ruleList>
                <ruleGroup>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>mysql</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>postgres</value>
                        </compareText>
                    </ruleList>
                </ruleGroup>
            </ruleList>
        </parameterGroup>
        <stringParameter>
	<!-- organization_url -->
	<name>organization_url</name>
            <title>Organization Domain Name</title>
            <description>Please enter the domain name of your organization:</description>
            <explanation>Your domain name will be displayed to users when they attempt to log in using their Aggregate server password.</explanation>
            <value>opendatakit.org</value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <width>30</width>
        </stringParameter>
        <parameterGroup>
	<!-- email -->
	<name>email</name>
            <title>Super-user E-mail Address</title>
            <explanation>This should be a valid Gmail account. The user with this account is Aggregate's super-user. They always have full permissions on the system.  

The first time Aggregate runs, only this super-user is allowed access to the system. Upon first logging in, they will be asked to complete the configuration of Aggregate by specifying additional users and what permissions those users have on the system.
</explanation>
            <value>your.email@gmail.com</value>
            <default></default>
            <parameterList>
                <stringParameter>
                    <name>email</name>
                    <title>Configuration</title>
                    <description>Please enter your gmail.com e-mail address:</description>
                    <explanation></explanation>
                    <value></value>
                    <default></default>
                    <allowEmptyValue>0</allowEmptyValue>
                    <width>30</width>
                    <validationActionList>
                        <if>
                            <actionList>
                                <throwError>
                                    <text>Bad email address: ${email}. Please enter a gmail email.com address, make sure to include '@gmail.com' on the end.</text>
                                </throwError>
                            </actionList>
                            <conditionRuleList>
                                <regExMatch>
                                    <logic>does_not_match</logic>
                                    <pattern>\w+@gmail\.com</pattern>
                                    <text>${email}</text>
                                </regExMatch>
                            </conditionRuleList>
                        </if>
                    </validationActionList>
                </stringParameter>
                <passwordParameter>
                    <name>email_password</name>
                    <title>Configuration</title>
                    <description>Please enter your password:</description>
                    <explanation></explanation>
                    <value></value>
                    <default></default>
                    <allowEmptyValue>1</allowEmptyValue>
                    <descriptionRetype></descriptionRetype>
                    <width>20</width>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>gae</value>
                        </compareText>
                        <compareText>
                            <logic>equals</logic>
                            <text>${install_gae}</text>
                            <value>1</value>
                        </compareText>
                    </ruleList>
                </passwordParameter>
            </parameterList>
        </parameterGroup>
        <stringParameter>
	<!--  app_id -->
	<name>app_id</name>
            <title>Google AppEngine application ID</title>
            <description>Please enter your application id:</description>
            <explanation>Leave this blank if you want to use the local development server
 (and not deploy to Google's cloud service).

Otherwise, to deploy to Google's AppEngine cloud, go to:
    https://appengine.google.com/ 
and create an application identifier to be used by Aggregate. 

If you are replacing an existing application already on appspot, the application identifier is the leftmost portion of the appspot.com URL. For example, if your application is at 'opendatakit.appspot.com' you would enter 'opendatakit' below.</explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <width>30</width>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </stringParameter>
        <choiceParameter>
	<!-- comm_sec_option -->
	<name>comm_sec_option</name>
            <title>Communications security</title>
            <description></description>
            <explanation>Select the level of communications security you wish the Aggregate webserver to enforce.
            </explanation>
            <value></value>
            <default>1</default>
            <allowEmptyValue>0</allowEmptyValue>
            <displayType>radiobuttons</displayType>
            <ordering>default</ordering>
            <ruleEvaluationLogic>or</ruleEvaluationLogic>
            <width>80</width>
            <optionList>
                <option>
                    <description></description>
                    <image></image>
                    <text>Upload submissions and view website without encryption (using http:).</text>
                    <value>1</value>
                </option>
                <option>
                    <description></description>
                    <image></image>
                    <text>Upload submissions and view website with encryption (using https:). </text>
                    <value>2</value>
                </option>
            </optionList>
            <preShowPageActionList>
                <removeChoiceOptions>
                    <name>comm_sec_option</name>
                    <options>4</options>
                </removeChoiceOptions>
                <addChoiceOptions>
                    <name>comm_sec_option</name>
                    <optionList>
                        <option>
                            <description></description>
                            <image></image>
                            <text>Disable communications security (needed when running on development server)</text>
                            <value>4</value>
                        </option>
                    </optionList>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${platform}</text>
                            <value>gae</value>
                        </compareText>
                        <compareTextLength>
                            <length>0</length>
                            <logic>equals</logic>
                            <text>${app_id}</text>
                        </compareTextLength>
                    </ruleList>
                </addChoiceOptions>
            </preShowPageActionList>
            <ruleList>
                <isTrue>
                    <value>${tomcat_authentication_should_configure}</value>
                </isTrue>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </choiceParameter>
        <directoryParameter>
	<!--  installdir -->
	<name>installdir</name>
            <title>Select an output directory</title>
            <description></description>
            <explanation>The configured WAR file and additional configuration files, if appropriate, will be placed in this directory.</explanation>
            <value></value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <mustBeWritable>0</mustBeWritable>
            <mustExist>1</mustExist>
            <width>40</width>
        </directoryParameter>
        <booleanParameter>
	<!-- write_properties -->
	<name>write_properties</name>
            <description></description>
            <explanation></explanation>
            <value></value>
            <default>true</default>
            <ask>0</ask>
            <cliOptionText>Output a .options file that contains the configuration from running the installer.</cliOptionText>
            <displayStyle>radiobuttons</displayStyle>
        </booleanParameter>
    </parameterList>
    <postInstallationActionList>
        <setInstallerVariable>
            <name>hostname</name>
            <value>${raw_hostname}</value>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>hostname</name>
            <value>${app_id}.appspot.com</value>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
                <compareTextLength>
                    <length>0</length>
                    <logic>does_not_equal</logic>
                    <text>${app_id}</text>
                </compareTextLength>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>hostname</name>
            <value>localhost</value>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
                <compareTextLength>
                    <length>0</length>
                    <logic>equals</logic>
                    <text>${app_id}</text>
                </compareTextLength>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>http_port</name>
            <value>80</value>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>http_port</name>
            <value>8080</value>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
                <compareText>
                    <logic>equals</logic>
                    <text>${tomcat_port_choice}</text>
                    <value>altPorts</value>
                </compareText>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>https_port</name>
            <value>443</value>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>https_port</name>
            <value>8443</value>
            <ruleList>
                <compareText>
                    <logic>does_not_equal</logic>
                    <text>${platform}</text>
                    <value>gae</value>
                </compareText>
                <compareText>
                    <logic>equals</logic>
                    <text>${tomcat_port_choice}</text>
                    <value>altPorts</value>
                </compareText>
            </ruleList>
        </setInstallerVariable>
        <if>
            <actionList>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>platform</key>
                    <value>${platform}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>organization_url</key>
                    <value>${organization_url}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>email</key>
                    <value>${email}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>email_password</key>
                    <value>${email_password}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>app_id</key>
                    <value>${app_id}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>install_db</key>
                    <value>${install_db}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>database_root_password</key>
                    <value>${database_root_password}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>jdbc_username</key>
                    <value>${jdbc_username}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>jdbc_password</key>
                    <value>${jdbc_password}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>jdbc_database</key>
                    <value>${jdbc_database}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>jdbc_schema</key>
                    <value>${jdbc_schema}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>database_port</key>
                    <value>${database_port}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>database_hostname</key>
                    <value>${database_hostname}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>database_host_port</key>
                    <value>${database_host_port}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>tomcat_authentication_should_configure</key>
                    <value>${tomcat_authentication_should_configure}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>comm_sec_option</key>
                    <value>${comm_sec_option}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>raw_hostname</key>
                    <value>${raw_hostname}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>hostname</key>
                    <value>${hostname}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>install_gae</key>
                    <value>${install_gae}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>install_tomcat</key>
                    <value>${install_tomcat}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>tomcat_port_choice</key>
                    <value>${tomcat_port_choice}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>write_properties</key>
                    <value>${write_properties}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>installdir</key>
                    <value>${installdir}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>tomcat_installdir</key>
                    <value>${tomcat_installdir}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>database_installdir</key>
                    <value>${tomcat_installdir}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>http_port</key>
                    <value>${http_port}</value>
                </propertiesFileSet>
                <propertiesFileSet>
                    <file>${installdir}/.options</file>
                    <key>https_port</key>
                    <value>${https_port}</value>
                </propertiesFileSet>
            </actionList>
            <ruleList>
                <isTrue>
                    <value>${write_properties}</value>
                </isTrue>
            </ruleList>
        </if>
    </postInstallationActionList>
    <preInstallationActionList>
        <autodetectJava>
            <promptUser>0</promptUser>
            <validVersionList>
                <validVersion>
                    <maxVersion></maxVersion>
                    <minVersion>1.6</minVersion>
                    <requireJDK>1</requireJDK>
                    <vendor></vendor>
                </validVersion>
            </validVersionList>
        </autodetectJava>
    </preInstallationActionList>
</component>
